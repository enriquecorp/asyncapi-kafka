asyncapi: "2.0.0"
info:
  title: Hello world application
  version: "0.1.1"
servers:
  production:
    url: localhost:9092
    protocol: kafka
    description: This is "My Company" broker.
    security:
      - user-password: []
channels:
  hello:
    publish:
      operationId: answerToHello
      message:
        $ref: "#/components/messages/hello-msg"
  goodbye:
    publish:
      operationId: answerToGoodbye
      message:
        $ref: "#/components/messages/goodbye-msg"
components:
  messages:
    hello-msg:
      payload:
        type: object
        properties:
          name:
            type: string
          sentAt:
            $ref: "#/components/schemas/sent-at"
      examples:
        - payload:
            name: "{{randomString(10)}}"
            sentAt: "{{now()}}"
    goodbye-msg:
      payload:
        type: object
        properties:
          sentAt:
            $ref: "#/components/schemas/sent-at"
      examples:
        - payload:
            sentAt: "{{now()}}"
  schemas:
    sent-at:
      type: string
      description: The date and time a message was sent.
      format: datetime
  securitySchemes:
    user-password:
      type: userPassword
